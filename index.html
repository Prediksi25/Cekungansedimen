<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HCPrediksi ‚Äì Subsurface Perkiraan Analysis</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
html,body{margin:0;height:100%;background:#05070a;font-family:Segoe UI,Arial}
#map{width:100%;height:100%}

/* HEADER */
#header{
 position:absolute;top:12px;left:50%;transform:translateX(-50%);
 z-index:999;padding:12px 20px;border-radius:18px;
 background:rgba(5,10,18,.85);
 border:1px solid rgba(77,227,255,.3);
 box-shadow:0 0 20px rgba(77,227,255,.2);
 text-align:center
}
#header h1{margin:0;font-size:18px;color:#4de3ff;letter-spacing:1px}
#header p{margin:2px 0;font-size:10px;color:#9ca3af}

/* PANEL */
#panel{
 position:absolute;top:85px;left:12px;z-index:999;
 background:rgba(8,12,20,.8);padding:12px;
 border-radius:14px;font-size:11px;color:#e5e7eb;
 border:1px solid rgba(255,255,255,.08)
}
#panel b{color:#4de3ff}

/* LEGEND */
#legend{
 position:absolute;bottom:120px;left:12px;z-index:999;
 background:rgba(8,12,20,.75);
 padding:10px 12px;border-radius:14px;
 font-size:10px;border:1px solid rgba(255,255,255,.08)
}
.legend-item{display:flex;align-items:center;margin-bottom:6px}
.legend-color{width:12px;height:12px;border-radius:50%;margin-right:8px}
.red{background:#ff3b3b}
.yellow{background:#ffd500}
.blue{background:#3b82f6}

/* DEPTH */
#depthPanel{
 position:absolute;bottom:20px;right:12px;z-index:999;
 background:rgba(8,12,20,.85);padding:12px;
 border-radius:16px;width:190px;display:none;
 border:1px solid rgba(77,227,255,.3)
}
#depthPanel h3{margin:0 0 6px;font-size:12px;color:#4de3ff}
#depthChart{background:#020617;border-radius:8px}

/* PRESSURE */
#pressure{margin-top:8px;height:8px;background:rgba(255,255,255,.1);border-radius:6px}
#pressureBar{
 height:100%;width:0%;
 background:linear-gradient(90deg,#3b82f6,#22d3ee,#facc15,#ef4444)
}

/* BUTTON */
button{
 width:100%;margin-top:8px;padding:7px;font-size:11px;
 border-radius:10px;background:#020617;color:#e5e7eb;
 border:1px solid rgba(77,227,255,.35)
}

/* RADAR */
.radar{
 width:240px;height:240px;border-radius:50%;
 background:radial-gradient(circle,
 rgba(77,227,255,.25) 0%,
 rgba(77,227,255,.12) 35%,
 rgba(77,227,255,.05) 60%,
 transparent 70%);
 animation:spin 4s linear infinite;
 pointer-events:none
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

/* SEISMIC */
#seismic{
 position:absolute;bottom:60px;left:0;width:100%;height:40px;
 background:repeating-linear-gradient(
 90deg,rgba(77,227,255,.4),
 rgba(77,227,255,.4) 2px,transparent 2px,transparent 10px);
 opacity:.15;animation:move 3s linear infinite;z-index:998
}
@keyframes move{from{background-position:0}to{background-position:120px}}

/* NOTE */
#note{
 position:absolute;bottom:8px;left:50%;transform:translateX(-50%);
 background:rgba(0,0,0,.65);color:#9ca3af;
 font-size:9px;padding:6px 12px;border-radius:12px;z-index:999
}
</style>
</head>

<body>
<div id="header">
 <h1>HCPrediksi</h1>
 <p>Subsurface Perkiraan Analysis System</p>
 <p style="font-size:9px;opacity:.6">SYS-ID: HCX-VA.01 | Internal Preview</p>
</div>

<div id="panel">
 üì° <b>GPS Aktif</b><br>
 üîé Mode: Perkiraan Prediction<br>
 üìç Radius Analisis: 2 km
</div>

<div id="legend">
 <div class="legend-item"><div class="legend-color red"></div>Anomali Tinggi</div>
 <div class="legend-item"><div class="legend-color yellow"></div>Anomali Menengah</div>
 <div class="legend-item"><div class="legend-color blue"></div>Respon Rendah</div>
</div>

<div id="depthPanel">
 <h3>Analisis Vertikal</h3>
 <canvas id="depthChart" width="150" height="90"></canvas>
 <div id="pressure"><div id="pressureBar"></div></div>
 <button id="exportAll">Export Peta + Grafik</button>
</div>

<div id="note">
‚ö†Ô∏èPerkiraan simulasi berbasis GPS. Bukan data geologi/geofisika resmi.
</div>

<div id="seismic"></div>
<div id="map"></div>

<script>
const map=L.map('map');
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
const chart=document.getElementById('depthChart');
const ctx=chart.getContext('2d');

function drawGraph(d){
 ctx.clearRect(0,0,150,90);
 let h=Math.min(80,d/10);
 ctx.fillStyle='#ff3b3b';
 ctx.fillRect(60,85-h,30,h);
 ctx.fillStyle='#fff';
 ctx.font='10px Arial';
 ctx.fillText(d+' m',52,85-h-4);
}
function setPressure(d){
 document.getElementById('pressureBar').style.width=
 Math.min(100,Math.round(d/15))+'%';
}

navigator.geolocation.getCurrentPosition(p=>{
 let lat=p.coords.latitude,lon=p.coords.longitude;
 map.setView([lat,lon],14);

 [800,1400,2000].forEach((r,i)=>{
  L.circle([lat,lon],{
   radius:r,color:['#ff3b3b','#ffd500','#3b82f6'][i],
   fillOpacity:.1,weight:2
  }).addTo(map);
 });

 const radar=document.createElement('div');
 radar.className='radar';
 L.marker([lat,lon],{
  icon:L.divIcon({html:radar,iconSize:[240,240],iconAnchor:[120,120]})
 }).addTo(map);

 map.on('click',()=>{
  let d=Math.floor(400+Math.random()*600);
  document.getElementById('depthPanel').style.display='block';
  document.querySelector('#depthPanel h3').innerText=
   'Anomali Vertikal ~ '+d+' m';
  drawGraph(d);setPressure(d);
 });
});
</script>
</body>
</html>